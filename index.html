<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>World Cup 2026 ‚Ä¢ Dallas AI Concierge</title>
  <style>
    :root{
      --bg:#070a12;
      --panel:#0d1326;
      --panel2:#0b1020;
      --text:#eaf0ff;
      --muted:#a8b3d6;
      --line:rgba(255,255,255,0.10);
      --accent:#22c55e;      /* pitch green */
      --accent2:#60a5fa;     /* blue glow */
      --accent3:#f59e0b;     /* gold */
      --danger:#ef4444;
      --bubbleUser:#2563eb;
      --bubbleBot:#0f1a33;
      --shadow: 0 16px 40px rgba(0,0,0,0.45);
      --radius: 18px;
    }

    *{ box-sizing:border-box; }
    html,body{ height:100%; }
    body{
      margin:0;
      font-family: ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto, Arial, sans-serif;
      color:var(--text);
      background:
        radial-gradient(1000px 600px at 20% 0%, rgba(96,165,250,0.25), transparent 60%),
        radial-gradient(900px 500px at 80% 10%, rgba(34,197,94,0.20), transparent 55%),
        radial-gradient(700px 500px at 50% 100%, rgba(245,158,11,0.12), transparent 55%),
        linear-gradient(180deg, #050710, var(--bg));
      overflow:hidden;
    }

    /* Subtle stadium lights */
    .lights::before, .lights::after{
      content:"";
      position:fixed;
      top:-120px;
      width:420px;
      height:420px;
      filter: blur(18px);
      opacity:0.16;
      pointer-events:none;
      background: radial-gradient(circle at 50% 50%, #ffffff, transparent 60%);
      border-radius:999px;
    }
    .lights::before{ left:40px; transform: rotate(-6deg); }
    .lights::after{ right:40px; transform: rotate(6deg); }

    .wrap{
      height:100%;
      display:flex;
      justify-content:center;
      padding:18px;
    }

    .app{
      width: min(980px, 100%);
      height: 100%;
      display:flex;
      flex-direction:column;
      border: 1px solid var(--line);
      border-radius: var(--radius);
      background: linear-gradient(180deg, rgba(13,19,38,0.92), rgba(11,16,32,0.88));
      box-shadow: var(--shadow);
      overflow:hidden;
      position:relative;
    }

    /* Dallas skyline silhouette */
    .skyline{
      position:absolute;
      left:0;
      right:0;
      top:0;
      height:140px;
      background:
        linear-gradient(180deg, rgba(0,0,0,0.0), rgba(0,0,0,0.12)),
        radial-gradient(1200px 160px at 50% 0%, rgba(96,165,250,0.25), transparent 70%);
      pointer-events:none;
    }
    .skyline svg{
      position:absolute;
      left:0;
      right:0;
      bottom:-1px;
      width:100%;
      height:88px;
      opacity:0.35;
    }

    header{
      padding:16px 18px 12px;
      border-bottom:1px solid var(--line);
      position:relative;
      z-index:2;
    }

    .topRow{
      display:flex;
      align-items:flex-start;
      justify-content:space-between;
      gap:14px;
      flex-wrap:wrap;
    }

    .brand{
      display:flex;
      gap:12px;
      align-items:center;
      min-width: 260px;
    }

    .badge{
      width:44px;
      height:44px;
      border-radius:14px;
      background:
        radial-gradient(circle at 30% 30%, rgba(255,255,255,0.35), transparent 55%),
        linear-gradient(135deg, rgba(34,197,94,0.95), rgba(96,165,250,0.95));
      border:1px solid rgba(255,255,255,0.18);
      display:flex;
      align-items:center;
      justify-content:center;
      flex:0 0 auto;
    }
    .badge span{
      font-weight:900;
      letter-spacing:0.5px;
      color:#081021;
      font-size:14px;
    }

    h1{
      margin:0;
      font-size:16px;
      line-height:1.1;
      letter-spacing:0.2px;
    }
    .sub{
      margin:4px 0 0;
      font-size:12px;
      color:var(--muted);
    }

    .langPanel{
      display:flex;
      flex-direction:column;
      align-items:flex-end;
      gap:6px;
      margin-left:auto;
    }
    .langTitle{
      font-size:11px;
      color:var(--muted);
    }
    .langs{
      display:flex;
      gap:8px;
      flex-wrap:wrap;
      justify-content:flex-end;
    }
    .pill{
      font-size:11px;
      padding:6px 10px;
      border-radius:999px;
      border:1px solid rgba(255,255,255,0.14);
      background: rgba(255,255,255,0.06);
      color: var(--text);
      white-space:nowrap;
    }
    .pill strong{ font-weight:800; }

    .promptRow{
      margin-top:12px;
      display:flex;
      gap:8px;
      flex-wrap:wrap;
      align-items:center;
    }
    .chip{
      border:1px solid rgba(255,255,255,0.14);
      background: rgba(255,255,255,0.05);
      color: var(--text);
      padding:8px 10px;
      border-radius:999px;
      font-size:12px;
      cursor:pointer;
      transition: transform 120ms ease, background 120ms ease;
      user-select:none;
    }
    .chip:hover{ background: rgba(255,255,255,0.08); transform: translateY(-1px); }
    .chip:active{ transform: translateY(0px); }

    .main{
      flex:1;
      display:flex;
      flex-direction:column;
      position:relative;
    }

    /* Pitch strip at bottom */
    .pitch{
      position:absolute;
      left:0;
      right:0;
      bottom:0;
      height:140px;
      background:
        linear-gradient(180deg, rgba(0,0,0,0), rgba(0,0,0,0.10)),
        linear-gradient(135deg, rgba(34,197,94,0.18), rgba(34,197,94,0.06));
      pointer-events:none;
    }
    .pitch::after{
      content:"";
      position:absolute;
      left:8%;
      right:8%;
      bottom:18px;
      height:88px;
      border:1px solid rgba(255,255,255,0.10);
      border-radius:14px;
      opacity:0.55;
    }

    #chat{
      flex:1;
      overflow-y:auto;
      padding:18px;
      display:flex;
      flex-direction:column;
      gap:10px;
      position:relative;
      z-index:2;
    }

    .bubble{
      max-width:78%;
      padding:10px 12px;
      border-radius:14px;
      line-height:1.35;
      white-space:pre-wrap;
      word-wrap:break-word;
      border:1px solid rgba(255,255,255,0.10);
      box-shadow: 0 6px 18px rgba(0,0,0,0.25);
    }
    .user{
      align-self:flex-end;
      background: linear-gradient(180deg, rgba(37,99,235,0.96), rgba(37,99,235,0.82));
      border-bottom-right-radius:6px;
      color:#fff;
    }
    .bot{
      align-self:flex-start;
      background: linear-gradient(180deg, rgba(15,26,51,0.96), rgba(15,26,51,0.80));
      border-bottom-left-radius:6px;
      color: var(--text);
    }

    .composer{
      border-top:1px solid var(--line);
      background: rgba(12,17,34,0.9);
      padding:14px 18px;
      display:flex;
      gap:10px;
      align-items:flex-end;
      position:relative;
      z-index:3;
    }

    textarea{
      flex:1;
      resize:none;
      height:46px;
      max-height:140px;
      padding:12px 12px;
      border-radius:14px;
      border:1px solid rgba(255,255,255,0.12);
      background: rgba(5,7,16,0.85);
      color: var(--text);
      outline:none;
      font-size:14px;
    }

    .btn{
      border:none;
      cursor:pointer;
      border-radius:14px;
      padding:12px 14px;
      font-weight:800;
      font-size:14px;
      color:#071018;
      background: linear-gradient(135deg, var(--accent), var(--accent2));
      min-width:100px;
      transition: transform 120ms ease, opacity 120ms ease;
    }
    .btn:disabled{ opacity:0.65; cursor:not-allowed; }
    .btn:active{ transform: translateY(1px); }

    .tiny{
      font-size:11px;
      color: var(--muted);
      padding:0 18px 14px;
      background: rgba(12,17,34,0.9);
      border-top: 0;
    }
    .tiny span{
      display:inline-block;
      margin-right:10px;
    }
    .kbd{
      font-family: ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, "Liberation Mono", monospace;
      font-size:10px;
      padding:2px 6px;
      border-radius:8px;
      border:1px solid rgba(255,255,255,0.12);
      background: rgba(255,255,255,0.06);
      color: var(--text);
    }

    @media (max-width: 620px){
      .bubble{ max-width: 92%; }
      .langPanel{ align-items:flex-start; width:100%; margin-top:10px; }
      .langs{ justify-content:flex-start; }
      .btn{ min-width: 88px; }
    }
  </style>
</head>

<body class="lights">
  <div class="wrap">
    <div class="app">
      <div class="skyline" aria-hidden="true">
        <!-- Simple stylized skyline silhouette -->
        <svg viewBox="0 0 1200 160" preserveAspectRatio="none">
          <path fill="rgba(0,0,0,0.55)" d="M0,140 L0,120 L40,120 L40,90 L70,90 L70,110 L105,110 L105,60 L140,60 L140,110 L160,110 L160,80 L190,80 L190,115 L220,115 L220,70 L260,70 L260,120 L290,120 L290,55 L330,55 L330,120 L360,120 L360,95 L395,95 L395,120 L420,120 L420,85 L455,85 L455,120 L500,120 L500,40 L540,40 L540,120 L580,120 L580,80 L610,80 L610,120 L650,120 L650,65 L690,65 L690,120 L720,120 L720,88 L750,88 L750,120 L790,120 L790,52 L830,52 L830,120 L860,120 L860,95 L895,95 L895,120 L930,120 L930,75 L965,75 L965,120 L1000,120 L1000,90 L1030,90 L1030,120 L1060,120 L1060,60 L1095,60 L1095,120 L1125,120 L1125,98 L1160,98 L1160,120 L1200,120 L1200,140 Z"/>
        </svg>
      </div>

      <header>
        <div class="topRow">
          <div class="brand">
            <div class="badge" title="Dallas ‚Ä¢ 2026">
              <span>DAL</span>
            </div>
            <div>
              <h1>World Cup 2026 ‚Ä¢ Dallas AI Concierge</h1>
              <p class="sub">Reservations ‚Ä¢ Hours ‚Ä¢ Specials ‚Ä¢ Game-day questions ‚Äî 24/7</p>
            </div>
          </div>

          <div class="langPanel">
            <div class="langTitle">Multilingual support:</div>
            <div class="langs" aria-label="Supported languages">
              <div class="pill"><strong>EN</strong> English</div>
              <div class="pill"><strong>ES</strong> Espa√±ol</div>
              <div class="pill"><strong>PT</strong> Portugu√™s</div>
              <div class="pill"><strong>FR</strong> Fran√ßais</div>
            </div>
          </div>
        </div>

        <div class="promptRow" aria-label="Quick prompts">
          <div class="chip" onclick="quickSend('What are your hours today?')">Hours</div>
          <div class="chip" onclick="quickSend('Where are you located?')">Address</div>
          <div class="chip" onclick="quickSend('Any specials for match day?')">Specials</div>
          <div class="chip" onclick="quickSend('Reservation for Cliff, 2145551212, 12/20/2025 at 7pm, party of 4')">Book demo reservation</div>
          <div class="chip" onclick="quickSend('¬øPuedo hacer una reserva para 4 personas ma√±ana a las 7?')">Espa√±ol</div>
        </div>
      </header>

      <div class="main">
        <div id="chat" role="log" aria-live="polite"></div>
        <div class="pitch" aria-hidden="true"></div>
      </div>

      <div class="composer">
        <textarea id="msg" placeholder="Type your message‚Ä¶ (Enter to send ‚Ä¢ Shift+Enter for a new line)"></textarea>
        <button id="sendBtn" class="btn" onclick="sendMessage()">Send</button>
      </div>

      <div class="tiny">
        <span>Tip: Use <span class="kbd">Enter</span> to send and <span class="kbd">Shift</span> + <span class="kbd">Enter</span> for a new line.</span>
        <span>For best results, include date/time/party size/name/phone for reservations.</span>
      </div>
    </div>
  </div>

  <script>
    // Conversation memory: keeps a running history and sends it to /chat
    const history = []; // {role:'user'|'assistant', content:'...'}

    const chatEl = document.getElementById("chat");
    const msgEl = document.getElementById("msg");
    const sendBtn = document.getElementById("sendBtn");

    function addBubble(role, text) {
      const div = document.createElement("div");
      div.className = "bubble " + (role === "user" ? "user" : "bot");
      div.textContent = text;
      chatEl.appendChild(div);
      chatEl.scrollTop = chatEl.scrollHeight;
    }

    function setSending(isSending) {
      sendBtn.disabled = isSending;
      msgEl.disabled = isSending;
      sendBtn.textContent = isSending ? "..." : "Send";
    }

    async function sendMessage() {
      const text = msgEl.value.trim();
      if (!text) return;

      addBubble("user", text);
      history.push({ role: "user", content: text });
      msgEl.value = "";
      msgEl.style.height = "46px";

      setSending(true);

      try {
        const res = await fetch("/chat", {
          method: "POST",
          headers: { "Content-Type": "application/json" },
          body: JSON.stringify({ message: text, history })
        });

        const data = await res.json();
        const reply = data.reply || "Sorry ‚Äî no reply received.";

        addBubble("assistant", reply);
        history.push({ role: "assistant", content: reply });

      } catch (e) {
        addBubble("assistant", "‚ö†Ô∏è Network error. Please try again.");
      } finally {
        setSending(false);
        msgEl.focus();
      }
    }

    function quickSend(text){
      msgEl.value = text;
      sendMessage();
    }

    // Enter to send, Shift+Enter for newline
    msgEl.addEventListener("keydown", (e) => {
      if (e.key === "Enter" && !e.shiftKey) {
        e.preventDefault();
        sendMessage();
      }
    });

    // Auto-grow textarea
    msgEl.addEventListener("input", () => {
      msgEl.style.height = "46px";
      msgEl.style.height = Math.min(msgEl.scrollHeight, 140) + "px";
    });

    // Welcome message + store in history
    const welcome = "üèüÔ∏è Welcome to the World Cup 2026 Dallas concierge! Ask about hours, specials, or book a reservation. You can speak English, Espa√±ol, Portugu√™s, or Fran√ßais.";
    addBubble("assistant", welcome);
    history.push({ role: "assistant", content: welcome });
  </script>
</body>
</html>